<!doctype html>
<script>
var getNextFilename = (function() {
    var COUNT = 1030;
    var used = [];
    return function() {
        if (used.length === COUNT) {
            used = [];
        }
        var i;
        while (true) {
            i = Math.floor(COUNT * Math.random());
            if (used.indexOf(i) === -1) break;
        }
        used.push(i);
        console.log(i);
        return 'audio/' + i + '.mp3';
    };
})();


var audio = document.createElement('video');
audio.src = getNextFilename();

var preload = document.createElement('video');
preload.src = getNextFilename();

function audioEnded() {
    var temp = audio;
    audio = preload;
    preload = temp;
    audio.play();
    preload.src = getNextFilename();
    preload.load();
}

audio.onended = audioEnded;
preload.onended = audioEnded;

audio.onplaying = function() {
    var elt = document.getElementById('start');
    if (elt) {
        elt.parentNode.removeChild(elt);
    }
};

function start() {
    audio.play();
    preload.load()
}

start();
</script>
<div id="start" onclick="start()">start</div>
